---
allowed-tools: Task
---

# DD 智能对话系统

注入 DD 项目持久上下文, 保持 Claude Code 原有对话功能的同时提供项目感知能力.

## 核心功能

### 持久上下文注入

自动加载并注入项目的完整上下文信息, 让对话具备项目感知能力:

- 项目基础信息和技术架构
- 功能开发状态和进度
- 任务分解情况和依赖关系
- 历史决策和重要变更记录

### 保持原有对话体验

- 不改变 Claude Code 的自然对话方式
- 只是在对话开始时注入项目上下文
- 用户可以像平常一样提问和讨论
- AI 会基于项目上下文给出更准确的回答

## 执行机制

### 子智能体调用

命令执行时调用专门的子智能体加载项目上下文:

Run `bash .claude/scripts/dd/chat.sh` using a sub-agent and show me the complete output.

**重要规则**:

- DO NOT truncate the output
- DO NOT collapse the output
- Show the complete context information
- Ensure all project details are loaded

### 上下文加载流程

1. **脚本执行**: 调用 chat.sh 读取所有上下文文件
2. **信息整合**: 子智能体整合项目完整信息
3. **上下文注入**: 将整合后的信息注入到对话中
4. **对话继续**: 基于注入的上下文进行正常对话

## 使用方式

```bash
/dd:chat
```

## 注入的上下文信息

### 项目基础信息

- 项目名称、描述、目标
- 技术选型和架构设计
- 开发规范和约束条件

### 开发状态信息

- 功能列表和开发进度
- 任务分解和执行状态
- 依赖关系和优先级

### 历史决策信息

- 重要技术决策记录
- 架构变更历史
- 问题解决方案记录

## 对话增强效果

通过上下文注入, AI 能够:

- 基于项目实际情况给出建议
- 了解功能间的依赖关系
- 考虑已有的技术选型约束
- 提供符合项目规范的方案
- 建议下一步具体操作

## 示例效果

**无上下文时**:

```
用户: 我应该用什么数据库？
AI: [通用数据库建议]
```

**有上下文时**:

```
用户: 我应该用什么数据库？
AI: 基于你的Node.js + React技术栈, 以及你的用户认证系统需求, 建议使用MongoDB...
```

## 注入后的对话体验

### 项目感知能力

- AI 了解项目的技术选型和架构
- 能够结合现有功能状态给建议
- 考虑任务间的依赖关系
- 基于项目约束提供方案

### 自然对话方式

- 保持 Claude Code 原有的对话体验
- 支持自然语言交流
- 不需要特殊的命令格式
- 可以进行多轮深度对话

### 智能建议能力

- 基于上下文的针对性建议
- 考虑项目实际情况的技术方案
- 符合项目规范的实施建议
- 下一步操作的具体指导
