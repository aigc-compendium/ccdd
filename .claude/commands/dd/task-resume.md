---
allowed-tools: Read, Write, LS, Task
---

# ç»§ç»­æ‰§è¡Œä»»åŠ¡

ç»§ç»­æ‰§è¡Œå½“å‰æœªå®Œæˆçš„ä»»åŠ¡ï¼Œæ¢å¤ä»»åŠ¡ä¸Šä¸‹æ–‡å¹¶æ¨è¿›ä»»åŠ¡è¿›åº¦ã€‚

## ç”¨æ³•
```
/dd:task-continue [ä»»åŠ¡ID]
```

## å‚æ•°è¯´æ˜
- `[ä»»åŠ¡ID]` - å¯é€‰ï¼ŒæŒ‡å®šè¦ç»§ç»­çš„ä»»åŠ¡IDã€‚å¦‚æœä¸æä¾›ï¼Œè‡ªåŠ¨ç»§ç»­æœ€è¿‘çš„æœªå®Œæˆä»»åŠ¡ã€‚

## é¢„æ£€æ¸…å•

### 1. æŸ¥æ‰¾å½“å‰ä»»åŠ¡
```bash
# å¦‚æœæ²¡æœ‰æŒ‡å®šä»»åŠ¡IDï¼ŒæŸ¥æ‰¾å½“å‰æ­£åœ¨è¿›è¡Œçš„ä»»åŠ¡
if [ -z "$ARGUMENTS" ]; then
  # æ£€æŸ¥æ˜¯å¦æœ‰current-task.md
  if [ -f ".claude/context/current-task.md" ]; then
    task_id=$(grep "^ä»»åŠ¡ID:" .claude/context/current-task.md | sed 's/^ä»»åŠ¡ID: *//')
  else
    # æŸ¥æ‰¾çŠ¶æ€ä¸º"è¿›è¡Œä¸­"çš„ä»»åŠ¡
    task_id=$(grep -l "^çŠ¶æ€: è¿›è¡Œä¸­" .claude/epics/*/*.md | head -1 | xargs basename -s .md)
  fi
  
  if [ -z "$task_id" ]; then
    echo "âŒ æ²¡æœ‰æ‰¾åˆ°è¿›è¡Œä¸­çš„ä»»åŠ¡"
    echo "ğŸ’¡ è¿è¡Œ /dd:task-start <ä»»åŠ¡ID> å¼€å§‹æ–°ä»»åŠ¡"
    exit 1
  fi
else
  task_id="$ARGUMENTS"
fi
```

### 2. éªŒè¯ä»»åŠ¡çŠ¶æ€
```bash
# æ£€æŸ¥ä»»åŠ¡æ–‡ä»¶æ˜¯å¦å­˜åœ¨
task_file=$(find .claude/epics -name "${task_id}.md" | head -1)
if [ ! -f "$task_file" ]; then
  echo "âŒ ä»»åŠ¡æ–‡ä»¶ä¸å­˜åœ¨ï¼š$task_id"
  exit 1
fi

# æ£€æŸ¥ä»»åŠ¡çŠ¶æ€
task_status=$(grep "^çŠ¶æ€:" "$task_file" | sed 's/^çŠ¶æ€: *//')
if [ "$task_status" == "å·²å®Œæˆ" ]; then
  echo "âœ… ä»»åŠ¡å·²å®Œæˆï¼š$task_id"
  echo "ğŸ’¡ è¿è¡Œ /dd:task-start <æ–°ä»»åŠ¡ID> å¼€å§‹å…¶ä»–ä»»åŠ¡"
  exit 0
elif [ "$task_status" != "è¿›è¡Œä¸­" ]; then
  echo "âš ï¸ ä»»åŠ¡çŠ¶æ€ï¼š$task_status"
  echo "â“ ç¡®è®¤è¦ç»§ç»­æ­¤ä»»åŠ¡ï¼Ÿ(æ˜¯/å¦)"
  # ç­‰å¾…ç”¨æˆ·ç¡®è®¤
fi
```

### 3. æ¢å¤ä»»åŠ¡ä¸Šä¸‹æ–‡
```bash
# æ£€æŸ¥å¹¶æ¢å¤current-task.md
if [ ! -f ".claude/context/current-task.md" ]; then
  echo "ğŸ“ é‡å»ºä»»åŠ¡ä¸Šä¸‹æ–‡æ–‡ä»¶..."
  # ä»ä»»åŠ¡æ–‡ä»¶é‡å»ºä¸Šä¸‹æ–‡
fi
```

## æ“ä½œæŒ‡å—

### 1. ä»»åŠ¡ä¸Šä¸‹æ–‡æ¢å¤

#### åŠ è½½ä»»åŠ¡ä¿¡æ¯
```bash
# è¯»å–ä»»åŠ¡åŸºæœ¬ä¿¡æ¯
task_name=$(grep "^åç§°:" "$task_file" | sed 's/^åç§°: *//')
start_time=$(grep "^å¼€å§‹æ—¶é—´:" .claude/context/current-task.md | sed 's/^å¼€å§‹æ—¶é—´: *//')
last_update=$(grep "^æœ€åæ›´æ–°:" "$task_file" | sed 's/^æœ€åæ›´æ–°: *//')

echo "ğŸ”„ æ¢å¤ä»»åŠ¡ï¼š$task_name"
echo "ğŸ“… å¼€å§‹æ—¶é—´ï¼š$start_time"
echo "â° æœ€åæ›´æ–°ï¼š$last_update"
```

#### åˆ†æä»»åŠ¡è¿›åº¦
```bash
# ä»current-task.mdè¯»å–å·²å®Œæˆçš„æ­¥éª¤
completed_steps=$(grep "^- \[x\]" .claude/context/current-task.md | wc -l)
total_steps=$(grep "^- \[\]" .claude/context/current-task.md | wc -l)
remaining_steps=$((total_steps - completed_steps))

echo "ğŸ“Š ä»»åŠ¡è¿›åº¦ï¼š$completed_steps/$total_steps æ­¥éª¤å·²å®Œæˆ"
echo "â³ å‰©ä½™æ­¥éª¤ï¼š$remaining_steps"
```

#### è¯†åˆ«å½“å‰çŠ¶æ€
```bash
# åˆ†æä¸Šæ¬¡åœæ­¢çš„ä½ç½®
last_completed_step=$(grep "^- \[x\]" .claude/context/current-task.md | tail -1)
next_step=$(grep -A1 "^- \[x\].*" .claude/context/current-task.md | grep "^- \[\]" | head -1)

echo "âœ… æœ€åå®Œæˆï¼š$last_completed_step"
echo "ğŸ¯ ä¸‹ä¸€æ­¥éª¤ï¼š$next_step"
```

### 2. é—®é¢˜å’Œé˜»ç¢å›é¡¾

#### æ£€æŸ¥é—ç•™é—®é¢˜
```bash
# ä»current-task.mdè¯»å–æœªè§£å†³çš„é—®é¢˜
unresolved_issues=$(sed -n '/^### é—®é¢˜è®°å½•/,/^### /p' .claude/context/current-task.md | grep "çŠ¶æ€ï¼šå¾…è§£å†³")

if [ -n "$unresolved_issues" ]; then
  echo "âš ï¸ å‘ç°æœªè§£å†³çš„é—®é¢˜ï¼š"
  echo "$unresolved_issues"
  echo ""
  echo "ğŸ¤” éœ€è¦å…ˆè§£å†³è¿™äº›é—®é¢˜æ‰èƒ½ç»§ç»­ï¼Ÿ(æ˜¯/å¦)"
  # ç­‰å¾…ç”¨æˆ·ç¡®è®¤
fi
```

#### æ™ºèƒ½ä½“è¾…åŠ©åˆ†æ
```yaml
Task:
  description: "åˆ†æä»»åŠ¡ç»§ç»­ç­–ç•¥"
  subagent_type: "code-analyzer"
  prompt: |
    åˆ†æä»»åŠ¡ç»§ç»­æ‰§è¡Œç­–ç•¥ï¼š
    
    ä»»åŠ¡ä¿¡æ¯ï¼š
    - åç§°ï¼š$task_name
    - IDï¼š$task_id  
    - å½“å‰çŠ¶æ€ï¼šè¿›è¡Œä¸­
    
    å·²å®Œæˆçš„å·¥ä½œï¼š
    {æ’å…¥current-task.mdä¸­å·²å®Œæˆçš„æ­¥éª¤}
    
    é—ç•™é—®é¢˜ï¼š
    {æ’å…¥æœªè§£å†³çš„é—®é¢˜}
    
    ä»»åŠ¡åŸå§‹è¦æ±‚ï¼š
    {æ’å…¥ä»»åŠ¡æ–‡ä»¶çš„ç›®æ ‡å’ŒéªŒæ”¶æ ‡å‡†}
    
    è¯·æä¾›ï¼š
    1. å½“å‰è¿›åº¦è¯„ä¼°
    2. ä¸‹ä¸€æ­¥å…·ä½“è¡ŒåŠ¨å»ºè®®
    3. é—ç•™é—®é¢˜çš„è§£å†³ç­–ç•¥
    4. æ½œåœ¨é£é™©å’Œæ³¨æ„äº‹é¡¹
    5. å®Œæˆä»»åŠ¡çš„æ—¶é—´ä¼°ç®—
    
    ç¡®ä¿å»ºè®®å…·ä½“å¯æ“ä½œï¼Œå¸®åŠ©å¿«é€Ÿæ¢å¤å¼€å‘èŠ‚å¥ã€‚
```

### 3. ç»§ç»­æ‰§è¡Œé˜¶æ®µ

#### æ›´æ–°æ—¶é—´æˆ³
```bash
# æ›´æ–°ä»»åŠ¡æ¢å¤æ—¶é—´
current_time=$(date -u +"%Y-%m-%dT%H:%M:%SZ")

# åœ¨current-task.mdä¸­è®°å½•æ¢å¤
cat >> .claude/context/current-task.md << EOF

## ä»»åŠ¡æ¢å¤ - $current_time
ä» $last_update æ¢å¤ä»»åŠ¡æ‰§è¡Œ
å½“å‰è¿›åº¦ï¼š$completed_steps/$total_steps æ­¥éª¤å·²å®Œæˆ
EOF

# æ›´æ–°ä»»åŠ¡æ–‡ä»¶
sed -i.bak "s/^æœ€åæ›´æ–°:.*/æœ€åæ›´æ–°: $current_time/" "$task_file"
rm "${task_file}.bak"
```

#### åˆ¶å®šç»§ç»­è®¡åˆ’
```bash
# æ ¹æ®åˆ†æç»“æœåˆ¶å®šè¯¦ç»†çš„ç»§ç»­è®¡åˆ’
create_continuation_plan() {
  echo "ğŸ“‹ åˆ¶å®šç»§ç»­æ‰§è¡Œè®¡åˆ’..."
  
  cat >> .claude/context/current-task.md << EOF

### ç»§ç»­æ‰§è¡Œè®¡åˆ’
1. **ç«‹å³è¡ŒåŠ¨é¡¹**
   - [ ] è§£å†³é—ç•™é—®é¢˜ï¼ˆå¦‚æœ‰ï¼‰
   - [ ] éªŒè¯å·²å®Œæˆå·¥ä½œçš„æ­£ç¡®æ€§
   - [ ] ç»§ç»­ä¸‹ä¸€ä¸ªå¾…å®Œæˆæ­¥éª¤

2. **çŸ­æœŸç›®æ ‡ï¼ˆä»Šæ—¥ï¼‰**
   - [ ] å®Œæˆå½“å‰é˜¶æ®µçš„å‰©ä½™å·¥ä½œ
   - [ ] è¿›è¡Œé˜¶æ®µæ€§éªŒè¯

3. **ä¸­æœŸç›®æ ‡ï¼ˆæœ¬å‘¨ï¼‰**
   - [ ] å®Œæˆæ‰€æœ‰å®æ–½æ­¥éª¤
   - [ ] é€šè¿‡éªŒæ”¶æ ‡å‡†æ£€æŸ¥
   - [ ] å‡†å¤‡ä»»åŠ¡å®Œæˆ

### æ³¨æ„äº‹é¡¹
- ä¿æŒä¸åŸå§‹è®¾è®¡çš„ä¸€è‡´æ€§
- åŠæ—¶æ›´æ–°è¿›åº¦è®°å½•
- é‡åˆ°æ–°é—®é¢˜ç«‹å³è®°å½•
EOF
}
```

### 4. æ‰§è¡Œç›‘æ§

#### å®æ—¶è¿›åº¦è·Ÿè¸ª
```bash
# å®šä¹‰è¿›åº¦æ›´æ–°å‡½æ•°
update_continuation_progress() {
  local step_description="$1"
  local current_time=$(date -u +"%Y-%m-%dT%H:%M:%SZ")
  
  # æ›´æ–°current-task.md
  sed -i.bak "s/- \[\] $step_description/- [x] $step_description - å®Œæˆæ—¶é—´ï¼š$current_time/" .claude/context/current-task.md
  rm .claude/context/current-task.md.bak
  
  # æ›´æ–°ä»»åŠ¡æ–‡ä»¶æ—¶é—´æˆ³
  sed -i.bak "s/^æœ€åæ›´æ–°:.*/æœ€åæ›´æ–°: $current_time/" "$task_file"
  rm "${task_file}.bak"
  
  echo "âœ… æ­¥éª¤å®Œæˆï¼š$step_description"
}
```

#### è´¨é‡æ£€æŸ¥ç‚¹
```bash
# åœ¨å…³é”®ç‚¹è¿›è¡Œè´¨é‡æ£€æŸ¥
quality_checkpoint() {
  echo "ğŸ” æ‰§è¡Œè´¨é‡æ£€æŸ¥..."
  
  # æ£€æŸ¥ä»£ç å˜æ›´ï¼ˆå¦‚æœæœ‰ï¼‰
  if git diff --quiet; then
    echo "ğŸ“„ å·¥ä½œåŒºå¹²å‡€ï¼Œæ— æœªæäº¤æ›´æ”¹"
  else
    echo "ğŸ“ æ£€æµ‹åˆ°ä»£ç å˜æ›´ï¼Œå»ºè®®è¿è¡Œï¼š/dd:changes-review"
  fi
  
  # æ£€æŸ¥ä»»åŠ¡ç›®æ ‡å¯¹é½
  echo "ğŸ¯ éªŒè¯ä»»åŠ¡ç›®æ ‡å¯¹é½æ€§..."
  echo "   è¯·ç¡®è®¤å½“å‰è¿›å±•ä¸ä»»åŠ¡ç›®æ ‡ä¸€è‡´"
}
```

## æ™ºèƒ½æ¢å¤åŠŸèƒ½

### ä¸Šä¸‹æ–‡é‡å»º
```bash
# å¦‚æœcurrent-task.mdä¸å­˜åœ¨ï¼Œæ™ºèƒ½é‡å»º
rebuild_task_context() {
  local task_file="$1"
  local task_id="$2"
  
  echo "ğŸ”§ é‡å»ºä»»åŠ¡ä¸Šä¸‹æ–‡..."
  
  # ä»ä»»åŠ¡æ–‡ä»¶æå–ä¿¡æ¯
  local task_name=$(grep "^åç§°:" "$task_file" | sed 's/^åç§°: *//')
  local created_time=$(grep "^åˆ›å»ºæ—¶é—´:" "$task_file" | sed 's/^åˆ›å»ºæ—¶é—´: *//')
  local current_time=$(date -u +"%Y-%m-%dT%H:%M:%SZ")
  
  cat > .claude/context/current-task.md << EOF
---
ä»»åŠ¡ID: $task_id
ä»»åŠ¡åç§°: $task_name
å¼€å§‹æ—¶é—´: $created_time
çŠ¶æ€: è¿›è¡Œä¸­
ä¸Šæ¬¡æ›´æ–°: $current_time
é‡å»º: true
---

# å½“å‰ä»»åŠ¡ï¼š$task_nameï¼ˆå·²é‡å»ºï¼‰

## ä»»åŠ¡ç›®æ ‡
$(sed -n '/^## ç›®æ ‡/,/^## /p' "$task_file" | head -n -1 | tail -n +2)

## æ‰§è¡Œè®¡åˆ’
åŸºäºä»»åŠ¡æ–‡ä»¶é‡å»ºï¼Œè¯·æ›´æ–°å®é™…è¿›åº¦

## å®Œæˆè¿›åº¦
- [ ] ä»»åŠ¡åˆ†æå®Œæˆ
- [ ] å®æ–½æ–¹æ¡ˆç¡®å®š
- [ ] ä»£ç å®ç°å®Œæˆ
- [ ] è‡ªæˆ‘éªŒè¯é€šè¿‡

## é‡å»ºè¯´æ˜
æ­¤ä¸Šä¸‹æ–‡æ–‡ä»¶å·²é‡å»ºï¼Œè¯·æ ¹æ®å®é™…æƒ…å†µæ›´æ–°è¿›åº¦çŠ¶æ€ã€‚
EOF
  
  echo "âœ… ä»»åŠ¡ä¸Šä¸‹æ–‡å·²é‡å»º"
}
```

### è¿›åº¦æ¨æµ‹
```bash
# åŸºäºgitæäº¤å†å²æ¨æµ‹ä»»åŠ¡è¿›åº¦
estimate_progress_from_git() {
  local task_id="$1"
  
  echo "ğŸ” åˆ†ægitå†å²æ¨æµ‹ä»»åŠ¡è¿›åº¦..."
  
  # æŸ¥æ‰¾ä¸ä»»åŠ¡ç›¸å…³çš„æäº¤
  local related_commits=$(git log --oneline --grep="$task_id\|ä»»åŠ¡.*$task_id" | head -5)
  
  if [ -n "$related_commits" ]; then
    echo "ğŸ“Š å‘ç°ç›¸å…³æäº¤ï¼š"
    echo "$related_commits"
    echo ""
    echo "ğŸ’¡ åŸºäºæäº¤å†å²ï¼Œä»»åŠ¡å¯èƒ½æœ‰ä¸€å®šè¿›å±•"
  else
    echo "â„¹ï¸ æœªå‘ç°ç›¸å…³æäº¤ï¼Œä»»åŠ¡å¯èƒ½åˆšå¼€å§‹"
  fi
}
```

## è¾“å‡ºæ ¼å¼

### ç»§ç»­ç¡®è®¤
```markdown
ğŸ”„ ç»§ç»­æ‰§è¡Œä»»åŠ¡ï¼š$task_name

ğŸ“‹ ä»»åŠ¡ä¿¡æ¯ï¼š
  - ä»»åŠ¡IDï¼š$task_id
  - å¼€å§‹æ—¶é—´ï¼š$start_time
  - ä¸Šæ¬¡æ›´æ–°ï¼š$last_update
  - å·²æš‚åœï¼š{æš‚åœæ—¶é•¿}

ğŸ“Š å½“å‰è¿›åº¦ï¼š
  âœ… å·²å®Œæˆï¼š$completed_steps ä¸ªæ­¥éª¤
  â³ å¾…å®Œæˆï¼š$remaining_steps ä¸ªæ­¥éª¤
  ğŸ“ˆ å®Œæˆç‡ï¼š{ç™¾åˆ†æ¯”}%

ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨ï¼š
  1. {ä¸‹ä¸€ä¸ªå¾…å®Œæˆæ­¥éª¤}
  2. {åç»­æ­¥éª¤}

âš ï¸ æ³¨æ„äº‹é¡¹ï¼š
  - {é—ç•™é—®é¢˜æˆ–ç‰¹åˆ«æ³¨æ„çš„ç‚¹}
  
ğŸš€ å‡†å¤‡ç»§ç»­æ‰§è¡Œ...
```

### è¿›åº¦æ¢å¤æŠ¥å‘Š
```markdown
ğŸ“ˆ ä»»åŠ¡è¿›åº¦æ¢å¤æŠ¥å‘Š

â±ï¸ æ—¶é—´ä¿¡æ¯ï¼š
  - ä»»åŠ¡å¼€å§‹ï¼š$start_time
  - ä¸Šæ¬¡åœæ­¢ï¼š$last_update  
  - æ¢å¤æ—¶é—´ï¼š$current_time
  - æš‚åœæ—¶é•¿ï¼š{è®¡ç®—çš„æ—¶é•¿}

âœ… å·²å®Œæˆå·¥ä½œï¼š
  - æ­¥éª¤1ï¼š{æè¿°} âœ“
  - æ­¥éª¤2ï¼š{æè¿°} âœ“
  
ğŸ”„ è¿›è¡Œä¸­å·¥ä½œï¼š
  - æ­¥éª¤3ï¼š{æè¿°}ï¼ˆé¢„è®¡è¿›åº¦ï¼š60%ï¼‰

ğŸ“‹ å¾…å®Œæˆå·¥ä½œï¼š
  - æ­¥éª¤4ï¼š{æè¿°}
  - æ­¥éª¤5ï¼š{æè¿°}

ğŸ¯ é¢„è®¡å®Œæˆæ—¶é—´ï¼š{åŸºäºå‰©ä½™å·¥ä½œçš„ä¼°ç®—}
```

## é”™è¯¯å¤„ç†

### æ— è¿›è¡Œä¸­ä»»åŠ¡
```markdown
â„¹ï¸ å½“å‰æ²¡æœ‰è¿›è¡Œä¸­çš„ä»»åŠ¡

å»ºè®®æ“ä½œï¼š
- è¿è¡Œ /dd:status æŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡çŠ¶æ€
- è¿è¡Œ /dd:task-start <ä»»åŠ¡ID> å¼€å§‹æ–°ä»»åŠ¡
- æ£€æŸ¥æ˜¯å¦æœ‰ä»»åŠ¡è¢«æ„å¤–æ ‡è®°ä¸ºå®Œæˆ
```

### ä¸Šä¸‹æ–‡ä¸¢å¤±
```markdown
âš ï¸ ä»»åŠ¡ä¸Šä¸‹æ–‡æ–‡ä»¶ä¸¢å¤±

ğŸ”§ è‡ªåŠ¨æ¢å¤æªæ–½ï¼š
- âœ… ä»ä»»åŠ¡æ–‡ä»¶é‡å»ºåŸºæœ¬ä¸Šä¸‹æ–‡
- âš ï¸ è¯¦ç»†è¿›åº¦ä¿¡æ¯å¯èƒ½ä¸¢å¤±
- ğŸ’¡ å»ºè®®æ‰‹åŠ¨æ›´æ–°å®é™…è¿›åº¦çŠ¶æ€

ğŸ“ éœ€è¦æ‰‹åŠ¨ç¡®è®¤çš„ä¿¡æ¯ï¼š
- å®é™…å®Œæˆçš„æ­¥éª¤
- é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ
- å½“å‰çš„å¼€å‘çŠ¶æ€
```

## æœ€ä½³å®è·µ

### ä»»åŠ¡ç»§ç»­åŸåˆ™
1. **çŠ¶æ€æ£€æŸ¥** - ä»”ç»†æ£€æŸ¥æš‚åœå‰çš„çŠ¶æ€
2. **é—®é¢˜ä¼˜å…ˆ** - ä¼˜å…ˆè§£å†³é—ç•™é—®é¢˜
3. **é€æ­¥æ¨è¿›** - å°æ­¥éª¤éªŒè¯åå†ç»§ç»­
4. **è®°å½•æ›´æ–°** - åŠæ—¶æ›´æ–°è¿›åº¦å’Œé—®é¢˜

### æ•ˆç‡æå‡
1. **å®šæœŸä¿å­˜** - é¿å…é•¿æ—¶é—´æš‚åœå¯¼è‡´ä¸Šä¸‹æ–‡ä¸¢å¤±
2. **æ¸…æ™°è®°å½•** - æš‚åœæ—¶è®°å½•æ¸…æ¥šå½“å‰çŠ¶æ€
3. **é—®é¢˜è·Ÿè¸ª** - åŠæ—¶è®°å½•å’Œè§£å†³é—®é¢˜
4. **èŠ‚å¥æŠŠæ§** - ä¿æŒé€‚å½“çš„å¼€å‘èŠ‚å¥