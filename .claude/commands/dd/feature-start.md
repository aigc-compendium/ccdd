---
allowed-tools: Task, Read, Bash
---

# DD 功能开发

智能判断功能状态, 采取对应操作策略, 开始或继续功能开发.

## 使用方式

```bash
/dd:feature-start <功能名称>
```

## 脚本调用

命令执行时会调用对应脚本读取功能信息:

```bash
bash .claude/scripts/dd/feature-start.sh "<feature_name>"
```

## 核心功能

### 智能状态判断

自动检测功能当前状态, 采取相应策略:

- **未开始** → 开始功能开发
- **开发中** → 继续开发进程
- **测试中** → 转为开发状态
- **已完成** → 询问是否重新开发

### 安全检查机制

- Git 工作区清洁性检查
- 远程仓库同步检查
- 代码状态一致性验证

## 执行流程

### 1. 脚本信息读取

- **调用脚本** - 执行 `feature-start.sh <feature_name>` 读取功能信息
- **状态检测** - 脚本返回功能当前状态、进度、任务统计等
- **上下文分析** - 检查是否存在会话上下文文件

### 2. 智能体状态判断

基于脚本返回的信息进行深度分析:

- **功能内容理解** - 分析功能目标、技术方案、当前进度
- **当前状态评估** - 理解功能开发进展和任务分布
- **安全状态检查** - 评估 Git 工作区状态和开发安全性
- **策略制定** - 制定最适合当前状态的执行策略

### 3. 前置条件检查

- **功能存在性** - 检查功能目录是否存在
- **任务拆解** - 检查是否已完成任务分解
- **状态检测** - 检查功能当前状态

### 4. 状态对应策略

| 功能状态 | 操作策略 | 描述                           |
| -------- | -------- | ------------------------------ |
| `未开始` | 开始开发 | 初始化开发环境, 开始第一个任务 |
| `开发中` | 继续开发 | 继续当前进行中的任务           |
| `测试中` | 转为开发 | 从测试状态返回开发             |
| `已完成` | 询问重开 | 确认是否重新开发               |

### 5. Git 安全检查

- **工作区检查** - 确保没有未提交的变更
- **远程同步** - 检查并处理远程仓库更新
- **分支状态** - 验证当前分支状态

### 6. 功能状态更新

- 更新功能状态为 `开发中`
- 记录开发开始时间
- 同步项目上下文状态

### 7. 智能任务执行

- 自动查找第一个未开始的任务
- 调用 `dd:task-start` 命令开始任务
- 如果所有任务都已开始, 显示状态概览

## 深度思考维度

- **开发准备度**: 功能是否已完成足够的前期设计
- **资源冲突**: 当前开发任务是否与其他工作冲突
- **技术准备**: 开发环境和技术栈是否就绪
- **优先级合理性**: 是否是当前最应该开发的功能

## 输出规范

- 功能开发状态报告
- Git 安全检查结果
- 当前执行任务信息
- 下一步操作建议
